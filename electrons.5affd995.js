parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"LXr8":[function(require,module,exports) {
var t;!function(t){"use strict";var o=function(){function t(t,o,e){this.x=t,this.y=o,this.z=e}return t.prototype.RotateX=function(o,e){return new t(this.x,o*this.y-e*this.z,e*this.y+o*this.z)},t.prototype.RotateY=function(o,e){return new t(o*this.x+e*this.z,this.y,o*this.z-e*this.x)},t.prototype.RotateZ=function(o,e){return new t(o*this.x-e*this.y,e*this.x-o*this.y,this.z)},t.prototype.Normalize=function(){var t=this.abs();return this.x/=t,this.y/=t,this.z/=t,this},t.Distance=function(t,o){var e=o.x-t.x,i=o.y-t.y,n=o.z-t.z;return Math.sqrt(e*e+i*i+n*n)},t.Midpoint=function(o,e){return new t((o.x+e.x)/2,(o.y+e.y)/2,(o.z+e.z)/2)},t.Dot=function(t,o){return t.x*o.x+t.y*o.y+t.z*o.z},t.prototype.dotProduct=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},t.prototype.absSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z},t.prototype.abs=function(){return Math.sqrt(this.absSquared())},t.prototype.crossProduct=function(t){return this.x*t.y-this.y*t.x},t.prototype.getDirection=function(){return Math.atan2(this.y,this.x)},t.prototype.add=function(o){return new t(this.x+o.x,this.y+o.y,this.z+o.z)},t.prototype.addTo=function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z},t.prototype.subtract=function(o){return new t(this.x-o.x,this.y-o.y,this.z-o.z)},t.prototype.subtractFrom=function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z},t.prototype.multiply=function(o){return new t(o*this.x,o*this.y,o*this.z)},t.prototype.multiplyBy=function(t){this.x*=t,this.y*=t,this.z*=t},t.Zero=new t(0,0,0),t}();function e(t){return t*(Math.PI/180)}var i,n,r,s,a=function(){function t(t,o,e){this.r=t,this.s=o,this.t=e}return t.prototype.RotateX=function(o){var e=Math.cos(o),i=Math.sin(o);return new t(this.r.RotateX(e,i),this.s.RotateX(e,i),this.t.RotateX(e,i))},t.prototype.RotateY=function(o){var e=Math.cos(o),i=Math.sin(o);return new t(this.r.RotateY(e,i),this.s.RotateY(e,i),this.t.RotateY(e,i))},t.prototype.RotateZ=function(o){var e=Math.cos(o),i=Math.sin(o);return new t(this.r.RotateZ(e,i),this.s.RotateZ(e,i),this.t.RotateZ(e,i))},t.prototype.Rotate=function(t){return new o(t.dotProduct(this.r),t.dotProduct(this.s),t.dotProduct(this.t))},t.Unrotated=new t(new o(1,0,0),new o(0,1,0),new o(0,0,1)),t}(),h=function(){function t(t){this.position=t.Normalize()}return t.prototype.AddExtForce=function(t){var o=this.position.subtract(t.position),e=1/o.absSquared(),i=o.Normalize().multiply(e);this.force=this.force.add(i),t.force=t.force.subtract(i)},t.prototype.UpdatePosition=function(t){this.position=this.position.add(t).Normalize()},t.prototype.TangentialForce=function(){var t=this.position.multiply(this.force.dotProduct(this.position));return this.force.subtract(t)},t.prototype.Rotate=function(t){this.position=t.Rotate(this.position)},t.prototype.GetPosition=function(){return this.position},t.prototype.ResetForce=function(){this.force=o.Zero},t}(),u=function(){return function(t,o){this.horizontal=t,this.vertical=o}}(),c=function(){function t(t,o,e,i){this.pixelsWide=t,this.pixelsHigh=o,this.zoomFactor=e,this.parallaxDistance=i}return t.prototype.Erase=function(t){t.clearRect(0,0,this.pixelsWide,this.pixelsHigh)},t.prototype.GetCameraCoords=function(t){var o=this.pixelsWide*this.zoomFactor/(this.parallaxDistance-t.z),e=o*t.x,i=o*t.y;return new u(this.pixelsWide/2+e,this.pixelsHigh/2-i)},t.prototype.DrawSphere=function(t,e,i,n){var r=this.GetCameraCoords(e),s=i/this.parallaxDistance,a=s*Math.sqrt(this.parallaxDistance*this.parallaxDistance-i*i),h=s*i,u=e.add(new o(a,0,h)),c=this.GetCameraCoords(u),p=Math.abs(c.horizontal-r.horizontal);return t.beginPath(),t.arc(r.horizontal,r.vertical,p,0,2*Math.PI,!0),t.fillStyle="white",t.strokeStyle=n,t.lineWidth=1,t.stroke(),u.z},t.prototype.DrawLine=function(t,o,e,i,n,r){var s=this.GetCameraCoords(o),a=this.GetCameraCoords(e),h=t.createLinearGradient(s.horizontal,s.vertical,a.horizontal,a.vertical);h.addColorStop(0,i),h.addColorStop(1,n),t.setLineDash(r),t.beginPath(),t.moveTo(s.horizontal,s.vertical),t.lineTo(a.horizontal,a.vertical),t.strokeStyle=h,t.lineWidth=1,t.stroke(),t.setLineDash([])},t}(),p=function(){function t(){this.sphereCenter=new o(0,0,0),this.eList=[]}return t.prototype.AddElectron=function(t){this.eList.push(t)},t.prototype.RemoveElectron=function(){this.eList.length>1&&this.eList.pop()},t.prototype.CountElectrons=function(){return this.eList.length},t.prototype.Update=function(){for(var t=this.eList.length,o=0;o<t;++o)this.eList[o].ResetForce();for(o=0;o<t-1;++o)for(var e=o+1;e<t;++e)this.eList[o].AddExtForce(this.eList[e]);var i=[],n=0;for(o=0;o<t;++o){var r=this.eList[o].TangentialForce(),s=r.abs();i.push(r),n=Math.max(n,s)}if(n>0){var a=.005/(n*Math.sqrt(t));for(o=0;o<t;++o)this.eList[o].UpdatePosition(i[o].multiply(a))}},t.prototype.AdjustCountElectrons=function(t){for(;this.CountElectrons()<t;)this.AddElectron(new h(C()));for(;this.CountElectrons()>t;)this.RemoveElectron();!function(){try{s.CountElectrons=n.CountElectrons(),window.localStorage.setItem("Electrons",JSON.stringify(s))}catch(t){}}()},t.prototype.Render=function(t){var e=i.getContext("2d");t.Erase(e);for(var n=t.DrawSphere(e,this.sphereCenter,1,"#d9d9d9"),r=0,s=this.eList;r<s.length;r++){var a=s[r];t.DrawSphere(e,a.GetPosition(),.01,this.PointColor(a.GetPosition(),n))}for(var h={},u=[[],[1,3],[1,6],[1,9],[1,13]],c=0;c<5;++c){for(var p={},l=null,f=0;f<this.eList.length-1;++f)if(!h[f])for(var d=this.eList[f].GetPosition(),y=f+1;y<this.eList.length;++y)if(!h[y]){var x=this.eList[y].GetPosition(),v=o.Distance(d,x);(null===l||v<l)&&(l=v)}if(null===l)break;var z=1.005*l;for(f=0;f<this.eList.length-1;++f)if(!h[f]){d=this.eList[f].GetPosition();var m=this.PointColor(d,n);for(y=f+1;y<this.eList.length;++y)if(!h[y]){x=this.eList[y].GetPosition();if((v=o.Distance(d,x))<=z){var C=this.PointColor(x,n);t.DrawLine(e,d,x,m,C,u[c]),p[f]=p[y]=!0}}}for(var f in p)h[f]=!0}},t.prototype.ColorRound=function(t){return Math.round(255*Math.min(1,Math.max(0,t)))},t.prototype.PointColor=function(t,o){var e=(o-t.z)/(o- -1.1),i=this.ColorRound(.2+.8*e),n=this.ColorRound(1.7*e);return"rgb("+i+","+this.ColorRound(e)+","+n+")"},t.prototype.Rotate=function(t){for(var o=0,e=this.eList;o<e.length;o++){e[o].Rotate(t)}},t}(),l=10,f=30,d=2,y=200,x=a.Unrotated.RotateY(e(.15)),v=a.Unrotated.RotateX(e(.0377)),z=a.Unrotated.RotateX(e(-15));function m(){n.Render(r);for(var t=0;t<l;++t)n.Update();n.Rotate(x),n.Rotate(v),window.setTimeout(m,f)}function C(){for(;;){var t=1-2*Math.random(),e=1-2*Math.random(),i=t*t+e*e;if(i<1){var n=2*Math.sqrt(1-i);return new o(t*n,e*n,1-2*i)}}}function w(){var t=document.getElementById("ElectronsCountEditBox"),o=document.getElementById("ErrorMessage"),e=t.value;if(e.match(/^[0-9]{1,4}$/)){var i=parseInt(e);if(i>=d&&i<=y)return n.AdjustCountElectrons(i),o.textContent="",void t.blur()}o.textContent="Invalid number of electrons. Must be an integer in the range "+d+" to "+y}window.onload=function(){!function(){try{s=JSON.parse(window.localStorage.getItem("Electrons"))}catch(t){}s&&"number"==typeof s.CountElectrons||(s={CountElectrons:22})}();i=document.getElementById("SimCanvas"),n=new p;for(var t=0;t<s.CountElectrons;++t)n.AddElectron(new h(C()));var o=document.getElementById("ElectronsCountEditBox");o.value=s.CountElectrons.toFixed(),o.onblur=w,o.setAttribute("min",d.toFixed()),o.setAttribute("max",y.toFixed()),o.onkeypress=function(t){return 13!==t.keyCode||(w(),event.preventDefault(),!1)},r=new c(i.width,i.height,7,15),n.Rotate(z),m()}}(t||(t={}));
},{}]},{},["LXr8"], null)
//# sourceMappingURL=electrons.5affd995.js.map