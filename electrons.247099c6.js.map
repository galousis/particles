{"version":3,"sources":["../dist/electrons.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["Electrons","Vector","_x","_y","_z","x","y","z","prototype","RotateX","scalarA","scalarB","RotateY","RotateZ","Normalize","magnitude","abs","Distance","a","b","dx","dy","dz","Math","sqrt","Midpoint","Dot","dotProduct","v2","absSquared","crossProduct","getDirection","atan2","add","addTo","subtract","subtractFrom","multiply","scalar","multiplyBy","Zero","RadiansFromDegrees","d","PI","RotationMatrix","r","s","t","radians","cos","sin","Rotate","v","Unrotated","Electron","position","AddExtForce","dp","forcemagnitude","force","UpdatePosition","positionShift","TangentialForce","radialForce","rotmat","GetPosition","ResetForce","CameraCoords","h","horizontal","vertical","Display","pixelsWide","pixelsHigh","zoomFactor","parallaxDistance","Erase","context","clearRect","GetCameraCoords","point","scale","DrawSphere","center","radius","color","origin","rho","xp","zp","tangent","edge","cradius","beginPath","arc","fillStyle","strokeStyle","lineWidth","stroke","DrawLine","startpoint","endpoint","startcolor","endcolor","linedash","startcam","endcam","gradient","createLinearGradient","addColorStop","setLineDash","moveTo","lineTo","Simulation","sphereCenter","eList","AddElectron","p","push","RemoveElectron","length","pop","CountElectrons","Update","n","i","j","tangentialForceList","maxForceMag","tf","forceMag","max","dt","AdjustCountElectrons","newCount","RandomUnitVector","SaveOptions","Render","display","canvas","getContext","zbend","_i","_a","PointColor","isConnectedIndex","level","nextIsConnectedIndex","minDistance","ipos","jpos","distance","threshold","icolor","jcolor","ColorRound","round","min","zlimit","frac","red","blue","green","sim","UpdatesPerFrame","FrameDelayMillis","ZoomFactor","ParallaxDistance","MinElectronsCount","MaxElectronsCount","Options","ySpinner","xSpinner","initialTilt","AnimationFrame","window","setTimeout","random","mag","root","OnEditElectronsCount","electronsCountEdit","document","getElementById","errorMessage","text","value","match","count","parseInt","textContent","blur","LoadOptions","JSON","parse","localStorage","getItem","e","setItem","stringify","onload","hidePrompt","showPrompt","toFixed","onblur","setAttribute","onkeypress","evt","keyCode","event","preventDefault","width","height","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","appendChild","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"electrons.247099c6.js","sourceRoot":"../src","sourcesContent":["var Electrons;\n(function (Electrons) {\n    'use strict';\n    var Vector = (function () {\n        function Vector(_x, _y, _z) {\n            this.x = _x;\n            this.y = _y;\n            this.z = _z;\n        }\n        Vector.prototype.RotateX = function (scalarA, scalarB) {\n            return new Vector(this.x, scalarA * this.y - scalarB * this.z, scalarB * this.y + scalarA * this.z);\n        };\n        Vector.prototype.RotateY = function (scalarA, scalarB) {\n            return new Vector(scalarA * this.x + scalarB * this.z, this.y, scalarA * this.z - scalarB * this.x);\n        };\n        Vector.prototype.RotateZ = function (scalarA, scalarB) {\n            return new Vector(scalarA * this.x - scalarB * this.y, scalarB * this.x - scalarA * this.y, this.z);\n        };\n        Vector.prototype.Normalize = function () {\n            var magnitude = this.abs();\n            this.x /= magnitude;\n            this.y /= magnitude;\n            this.z /= magnitude;\n            return this;\n        };\n        Vector.Distance = function (a, b) {\n            var dx = b.x - a.x;\n            var dy = b.y - a.y;\n            var dz = b.z - a.z;\n            return Math.sqrt(dx * dx + dy * dy + dz * dz);\n        };\n        Vector.Midpoint = function (a, b) {\n            return new Vector((a.x + b.x) / 2, (a.y + b.y) / 2, (a.z + b.z) / 2);\n        };\n        Vector.Dot = function (a, b) {\n            return a.x * b.x + a.y * b.y + a.z * b.z;\n        };\n        Vector.prototype.dotProduct = function (v2) {\n            return this.x * v2.x + this.y * v2.y + this.z * v2.z;\n        };\n        Vector.prototype.absSquared = function () {\n            return this.x * this.x + this.y * this.y + this.z * this.z;\n        };\n        Vector.prototype.abs = function () {\n            return Math.sqrt(this.absSquared());\n        };\n        Vector.prototype.crossProduct = function (v2) {\n            return (this.x * v2.y) - (this.y * v2.x);\n        };\n        Vector.prototype.getDirection = function () {\n            return Math.atan2(this.y, this.x);\n        };\n        Vector.prototype.add = function (v2) {\n            return new Vector(this.x + v2.x, this.y + v2.y, this.z + v2.z);\n        };\n        Vector.prototype.addTo = function (v2) {\n            this.x += v2.x;\n            this.y += v2.y;\n            this.z += v2.z;\n        };\n        Vector.prototype.subtract = function (v2) {\n            return new Vector(this.x - v2.x, this.y - v2.y, this.z - v2.z);\n        };\n        Vector.prototype.subtractFrom = function (v2) {\n            this.x -= v2.x;\n            this.y -= v2.y;\n            this.z -= v2.z;\n        };\n        Vector.prototype.multiply = function (scalar) {\n            return new Vector(scalar * this.x, scalar * this.y, scalar * this.z);\n        };\n        Vector.prototype.multiplyBy = function (scalar) {\n            this.x *= scalar;\n            this.y *= scalar;\n            this.z *= scalar;\n        };\n        Vector.Zero = new Vector(0, 0, 0);\n        return Vector;\n    }());\n    function RadiansFromDegrees(d) {\n        return d * (Math.PI / 180);\n    }\n    var RotationMatrix = (function () {\n        function RotationMatrix(r, s, t) {\n            this.r = r;\n            this.s = s;\n            this.t = t;\n        }\n        RotationMatrix.prototype.RotateX = function (radians) {\n            var a = Math.cos(radians);\n            var b = Math.sin(radians);\n            return new RotationMatrix(this.r.RotateX(a, b), this.s.RotateX(a, b), this.t.RotateX(a, b));\n        };\n        RotationMatrix.prototype.RotateY = function (radians) {\n            var a = Math.cos(radians);\n            var b = Math.sin(radians);\n            return new RotationMatrix(this.r.RotateY(a, b), this.s.RotateY(a, b), this.t.RotateY(a, b));\n        };\n        RotationMatrix.prototype.RotateZ = function (radians) {\n            var a = Math.cos(radians);\n            var b = Math.sin(radians);\n            return new RotationMatrix(this.r.RotateZ(a, b), this.s.RotateZ(a, b), this.t.RotateZ(a, b));\n        };\n        RotationMatrix.prototype.Rotate = function (v) {\n            return new Vector(v.dotProduct(this.r), v.dotProduct(this.s), v.dotProduct(this.t));\n        };\n        RotationMatrix.Unrotated = new RotationMatrix(new Vector(1, 0, 0), new Vector(0, 1, 0), new Vector(0, 0, 1));\n        return RotationMatrix;\n    }());\n    var Electron = (function () {\n        function Electron(position) {\n            this.position = position.Normalize();\n        }\n        Electron.prototype.AddExtForce = function (v2) {\n            var dp = this.position.subtract(v2.position);\n            var forcemagnitude = 1 / dp.absSquared();\n            var force = dp.Normalize().multiply(forcemagnitude);\n            this.force = this.force.add(force);\n            v2.force = v2.force.subtract(force);\n        };\n        Electron.prototype.UpdatePosition = function (positionShift) {\n            this.position = this.position.add(positionShift).Normalize();\n        };\n        Electron.prototype.TangentialForce = function () {\n            var radialForce = this.position.multiply(this.force.dotProduct(this.position));\n            return this.force.subtract(radialForce);\n        };\n        Electron.prototype.Rotate = function (rotmat) {\n            this.position = rotmat.Rotate(this.position);\n        };\n        Electron.prototype.GetPosition = function () {\n            return this.position;\n        };\n        Electron.prototype.ResetForce = function () {\n            this.force = Vector.Zero;\n        };\n        return Electron;\n    }());\n    var CameraCoords = (function () {\n        function CameraCoords(h, v) {\n            this.horizontal = h;\n            this.vertical = v;\n        }\n        return CameraCoords;\n    }());\n    var Display = (function () {\n        function Display(pixelsWide, pixelsHigh, zoomFactor, parallaxDistance) {\n            this.pixelsWide = pixelsWide;\n            this.pixelsHigh = pixelsHigh;\n            this.zoomFactor = zoomFactor;\n            this.parallaxDistance = parallaxDistance;\n        }\n        Display.prototype.Erase = function (context) {\n            context.clearRect(0, 0, this.pixelsWide, this.pixelsHigh);\n        };\n        Display.prototype.GetCameraCoords = function (point) {\n            var scale = this.pixelsWide * this.zoomFactor / (this.parallaxDistance - point.z);\n            var horizontal = scale * point.x;\n            var vertical = scale * point.y;\n            return new CameraCoords(this.pixelsWide / 2 + horizontal, this.pixelsHigh / 2 - vertical);\n        };\n        Display.prototype.DrawSphere = function (context, center, radius, color) {\n            var origin = this.GetCameraCoords(center);\n            var rho = radius / this.parallaxDistance;\n            var xp = rho * Math.sqrt(this.parallaxDistance * this.parallaxDistance - radius * radius);\n            var zp = rho * radius;\n            var tangent = center.add(new Vector(xp, 0, zp));\n            var edge = this.GetCameraCoords(tangent);\n            var cradius = Math.abs(edge.horizontal - origin.horizontal);\n            context.beginPath();\n            context.arc(origin.horizontal, origin.vertical, cradius, 0, 2 * Math.PI, true);\n            context.fillStyle = \"white\";\n            context.strokeStyle = color;\n            context.lineWidth = 1;\n            context.stroke();\n            return tangent.z;\n        };\n        Display.prototype.DrawLine = function (context, startpoint, endpoint, startcolor, endcolor, linedash) {\n            var startcam = this.GetCameraCoords(startpoint);\n            var endcam = this.GetCameraCoords(endpoint);\n            var gradient = context.createLinearGradient(startcam.horizontal, startcam.vertical, endcam.horizontal, endcam.vertical);\n            gradient.addColorStop(0, startcolor);\n            gradient.addColorStop(1, endcolor);\n            context.setLineDash(linedash);\n            context.beginPath();\n            context.moveTo(startcam.horizontal, startcam.vertical);\n            context.lineTo(endcam.horizontal, endcam.vertical);\n            context.strokeStyle = gradient;\n            context.lineWidth = 1;\n            context.stroke();\n            context.setLineDash([]);\n        };\n        return Display;\n    }());\n    var Simulation = (function () {\n        function Simulation() {\n            this.sphereCenter = new Vector(0, 0, 0);\n            this.eList = [];\n        }\n        Simulation.prototype.AddElectron = function (p) {\n            this.eList.push(p);\n        };\n        Simulation.prototype.RemoveElectron = function () {\n            if (this.eList.length > 1) {\n                this.eList.pop();\n            }\n        };\n        Simulation.prototype.CountElectrons = function () {\n            return this.eList.length;\n        };\n        Simulation.prototype.Update = function () {\n            var n = this.eList.length;\n            for (var i = 0; i < n; ++i) {\n                this.eList[i].ResetForce();\n            }\n            for (var i = 0; i < n - 1; ++i) {\n                for (var j = i + 1; j < n; ++j) {\n                    this.eList[i].AddExtForce(this.eList[j]);\n                }\n            }\n            var tangentialForceList = [];\n            var maxForceMag = 0;\n            for (var i = 0; i < n; ++i) {\n                var tf = this.eList[i].TangentialForce();\n                var forceMag = tf.abs();\n                tangentialForceList.push(tf);\n                maxForceMag = Math.max(maxForceMag, forceMag);\n            }\n            if (maxForceMag > 0) {\n                var dt = 0.005 / (maxForceMag * Math.sqrt(n));\n                for (var i = 0; i < n; ++i) {\n                    this.eList[i].UpdatePosition(tangentialForceList[i].multiply(dt));\n                }\n            }\n        };\n        Simulation.prototype.AdjustCountElectrons = function (newCount) {\n            while (this.CountElectrons() < newCount) {\n                this.AddElectron(new Electron(RandomUnitVector()));\n            }\n            while (this.CountElectrons() > newCount) {\n                this.RemoveElectron();\n            }\n            SaveOptions();\n        };\n        Simulation.prototype.Render = function (display) {\n            var context = canvas.getContext('2d');\n            display.Erase(context);\n            var zbend = display.DrawSphere(context, this.sphereCenter, 1.0, '#d9d9d9');\n            for (var _i = 0, _a = this.eList; _i < _a.length; _i++) {\n                var p = _a[_i];\n                display.DrawSphere(context, p.GetPosition(), 0.01, this.PointColor(p.GetPosition(), zbend));\n            }\n            var isConnectedIndex = {};\n            var linedash = [[], [1, 3], [1, 6], [1, 9], [1, 13]];\n            for (var level = 0; level < 5; ++level) {\n                var nextIsConnectedIndex = {};\n                var minDistance = null;\n                for (var i = 0; i < this.eList.length - 1; ++i) {\n                    if (!isConnectedIndex[i]) {\n                        var ipos = this.eList[i].GetPosition();\n                        for (var j = i + 1; j < this.eList.length; ++j) {\n                            if (!isConnectedIndex[j]) {\n                                var jpos = this.eList[j].GetPosition();\n                                var distance = Vector.Distance(ipos, jpos);\n                                if ((minDistance === null) || (distance < minDistance)) {\n                                    minDistance = distance;\n                                }\n                            }\n                        }\n                    }\n                }\n                if (minDistance === null) {\n                    break;\n                }\n                var threshold = 1.005 * minDistance;\n                for (var i = 0; i < this.eList.length - 1; ++i) {\n                    if (!isConnectedIndex[i]) {\n                        var ipos = this.eList[i].GetPosition();\n                        var icolor = this.PointColor(ipos, zbend);\n                        for (var j = i + 1; j < this.eList.length; ++j) {\n                            if (!isConnectedIndex[j]) {\n                                var jpos = this.eList[j].GetPosition();\n                                var distance = Vector.Distance(ipos, jpos);\n                                if (distance <= threshold) {\n                                    var jcolor = this.PointColor(jpos, zbend);\n                                    display.DrawLine(context, ipos, jpos, icolor, jcolor, linedash[level]);\n                                    nextIsConnectedIndex[i] = nextIsConnectedIndex[j] = true;\n                                }\n                            }\n                        }\n                    }\n                }\n                for (var i in nextIsConnectedIndex) {\n                    isConnectedIndex[i] = true;\n                }\n            }\n        };\n        Simulation.prototype.ColorRound = function (x) {\n            return Math.round(255 * Math.min(1, Math.max(0, x)));\n        };\n        Simulation.prototype.PointColor = function (p, zlimit) {\n            var frac = (zlimit - p.z) / (zlimit - (-1.1));\n            var red = this.ColorRound(0.2 + (0.8 * frac));\n            var blue = this.ColorRound(1.7 * frac);\n            var green = this.ColorRound(frac);\n            return 'rgb(' + red + ',' + green + ',' + blue + ')';\n        };\n        Simulation.prototype.Rotate = function (rotmat) {\n            for (var _i = 0, _a = this.eList; _i < _a.length; _i++) {\n                var p = _a[_i];\n                p.Rotate(rotmat);\n            }\n        };\n        return Simulation;\n    }());\n    var canvas;\n    var sim;\n    var display;\n    var UpdatesPerFrame = 10;\n    var FrameDelayMillis = 30;\n    var ZoomFactor = 7;\n    var ParallaxDistance = 15.0;\n    var MinElectronsCount = 2;\n    var MaxElectronsCount = 200;\n    var Options;\n    var ySpinner = RotationMatrix.Unrotated.RotateY(RadiansFromDegrees(0.15));\n    var xSpinner = RotationMatrix.Unrotated.RotateX(RadiansFromDegrees(0.0377));\n    var initialTilt = RotationMatrix.Unrotated.RotateX(RadiansFromDegrees(-15.0));\n    function AnimationFrame() {\n        sim.Render(display);\n        for (var i = 0; i < UpdatesPerFrame; ++i) {\n            sim.Update();\n        }\n        sim.Rotate(ySpinner);\n        sim.Rotate(xSpinner);\n        window.setTimeout(AnimationFrame, FrameDelayMillis);\n    }\n    function RandomUnitVector() {\n        while (true) {\n            var a = 1 - 2 * Math.random();\n            var b = 1 - 2 * Math.random();\n            var mag = (a * a) + (b * b);\n            if (mag < 1) {\n                var root = 2 * Math.sqrt(1 - mag);\n                return new Vector(a * root, b * root, 1 - (2 * mag));\n            }\n        }\n    }\n    function OnEditElectronsCount() {\n        var electronsCountEdit = document.getElementById('ElectronsCountEditBox');\n        var errorMessage = document.getElementById('ErrorMessage');\n        var text = electronsCountEdit.value;\n        if (text.match(/^[0-9]{1,4}$/)) {\n            var count = parseInt(text);\n            if (count >= MinElectronsCount && count <= MaxElectronsCount) {\n                sim.AdjustCountElectrons(count);\n                errorMessage.textContent = '';\n                electronsCountEdit.blur();\n                return;\n            }\n        }\n        errorMessage.textContent = 'Invalid number of electrons. Must be an integer in the range ' +\n            MinElectronsCount + ' to ' + MaxElectronsCount;\n    }\n    function LoadOptions() {\n        try {\n            Options = JSON.parse(window.localStorage.getItem('Electrons'));\n        }\n        catch (e) { }\n        if (!Options || typeof Options.CountElectrons !== 'number') {\n            Options = { CountElectrons: 22 };\n        }\n    }\n    function SaveOptions() {\n        try {\n            Options.CountElectrons = sim.CountElectrons();\n            window.localStorage.setItem('Electrons', JSON.stringify(Options));\n        }\n        catch (e) { }\n    }\n    window.onload = function () {\n        LoadOptions();\n        var hidePrompt = '&laquo;&nbsp;ÎšÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿';\n        var showPrompt = 'Î Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚&nbsp;&raquo;';\n        canvas = document.getElementById('SimCanvas');\n        sim = new Simulation();\n        for (var i = 0; i < Options.CountElectrons; ++i) {\n            sim.AddElectron(new Electron(RandomUnitVector()));\n        }\n        var electronsCountEdit = document.getElementById('ElectronsCountEditBox');\n        electronsCountEdit.value = Options.CountElectrons.toFixed();\n        electronsCountEdit.onblur = OnEditElectronsCount;\n        electronsCountEdit.setAttribute('min', MinElectronsCount.toFixed());\n        electronsCountEdit.setAttribute('max', MaxElectronsCount.toFixed());\n        electronsCountEdit.onkeypress = function (evt) {\n            if (evt.keyCode === 13) {\n                OnEditElectronsCount();\n                event.preventDefault();\n                return false;\n            }\n            return true;\n        };\n        display = new Display(canvas.width, canvas.height, ZoomFactor, ParallaxDistance);\n        sim.Rotate(initialTilt);\n        AnimationFrame();\n    };\n})(Electrons || (Electrons = {}));\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] âœ¨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] ðŸš¨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">ðŸš¨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}