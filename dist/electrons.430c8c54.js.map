{"version":3,"sources":["dist/VectorAnalysis.js","dist/Electron.js","dist/Display.js","dist/classes.js","dist/electrons.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["exports","__esModule","RotationMatrix","Vector","_x","_y","_z","x","y","z","prototype","RotateX","scalarA","scalarB","RotateY","RotateZ","Normalize","magnitude","abs","Distance","a","b","dx","dy","dz","Math","sqrt","Midpoint","Dot","dotProduct","v2","absSquared","crossProduct","getDirection","atan2","add","addTo","subtract","subtractFrom","multiply","scalar","multiplyBy","Zero","r","s","t","radians","cos","sin","Rotate","v","Unrotated","Electron","classes_1","require","position","AddExtForce","dp","forcemagnitude","force","UpdatePosition","positionShift","TangentialForce","radialForce","rotmat","GetPosition","ResetForce","Display","CameraCoords","h","horizontal","vertical","pixelsWide","pixelsHigh","zoomFactor","parallaxDistance","Erase","context","clearRect","GetCameraCoords","point","scale","DrawSphere","center","radius","color","origin","rho","xp","zp","tangent","edge","cradius","beginPath","arc","PI","fillStyle","strokeStyle","lineWidth","stroke","DrawLine","startpoint","endpoint","startcolor","endcolor","linedash","startcam","endcam","gradient","createLinearGradient","addColorStop","setLineDash","moveTo","lineTo","__createBinding","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","VectorAnalysis_1","VectorAnalysis_2","Electron_1","Display_1","Display_2","Electrons","RadiansFromDegrees","d","Simulation","sphereCenter","eList","AddElectron","p","push","RemoveElectron","length","pop","CountElectrons","Update","n","i","j","tangentialForceList","maxForceMag","tf","forceMag","max","dt","AdjustCountElectrons","newCount","RandomUnitVector","SaveOptions","Render","display","canvas","getContext","zbend","_i","_a","PointColor","isConnectedIndex","level","nextIsConnectedIndex","minDistance","ipos","jpos","distance","threshold","icolor","jcolor","ColorRound","round","min","zlimit","frac","red","blue","green","sim","UpdatesPerFrame","FrameDelayMillis","ZoomFactor","ParallaxDistance","MinElectronsCount","MaxElectronsCount","Options","ySpinner","xSpinner","initialTilt","Frame","window","setTimeout","random","mag","root","OnEditElectronsCount","electronsCountEdit","document","getElementById","errorMessage","text","value","match","count","parseInt","textContent","blur","LoadOptions","JSON","parse","localStorage","getItem","e","setItem","stringify","onload","hidePrompt","showPrompt","toFixed","onblur","setAttribute","onkeypress","evt","keyCode","event","preventDefault","width","height","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","appendChild","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"electrons.430c8c54.js","sourceRoot":"../src","sourcesContent":["\"use strict\";\nexports.__esModule = true;\nexports.RotationMatrix = exports.Vector = void 0;\nvar Vector = /** @class */ (function () {\n    /**\n     * Creates a new Vector instance using cartesian coordinates\n     *\n     * @param {number} x The x component of the vector\n     * @param {number} y The y component of the vector\n     * @param {number} z The y component of the vector\n     * @memberof Vector\n     */\n    function Vector(_x, _y, _z) {\n        this.x = _x;\n        this.y = _y;\n        this.z = _z;\n    }\n    /**\n     * Rotate X\n     * @param {number} scalarA\n     * @param {number} scalarB\n     * @memberof Vector\n     */\n    Vector.prototype.RotateX = function (scalarA, scalarB) {\n        return new Vector(this.x, scalarA * this.y - scalarB * this.z, scalarB * this.y + scalarA * this.z);\n    };\n    /**\n     * Rotate Y\n     * @param {number} scalarA\n     * @param {number} scalarB\n     * @memberof Vector\n     */\n    Vector.prototype.RotateY = function (scalarA, scalarB) {\n        return new Vector(scalarA * this.x + scalarB * this.z, this.y, scalarA * this.z - scalarB * this.x);\n    };\n    /**\n     * Rotate Z\n     * @param {number} scalarA\n     * @param {number} scalarB\n     * @memberof Vector\n     */\n    Vector.prototype.RotateZ = function (scalarA, scalarB) {\n        return new Vector(scalarA * this.x - scalarB * this.y, scalarB * this.x - scalarA * this.y, this.z);\n    };\n    /**\n     * Converts the vector into a unit vector in the same direction\n     *\n     * @memberof Vector\n     */\n    Vector.prototype.Normalize = function () {\n        var magnitude = this.abs();\n        this.x /= magnitude;\n        this.y /= magnitude;\n        this.z /= magnitude;\n        return this;\n    };\n    /**\n     * Calc distance between 2 given vectors\n     *\n     * @param {Vector} a\n     * @param {Vector} b\n     * @returns {number}\n     */\n    Vector.Distance = function (a, b) {\n        var dx = b.x - a.x;\n        var dy = b.y - a.y;\n        var dz = b.z - a.z;\n        return Math.sqrt(dx * dx + dy * dy + dz * dz);\n    };\n    /**\n     * Get the midpoint vector for 2 given vectors\n     *\n     * @param {Vector} a\n     * @param {Vector} b\n     * @returns {Vector}\n     */\n    Vector.Midpoint = function (a, b) {\n        return new Vector((a.x + b.x) / 2, (a.y + b.y) / 2, (a.z + b.z) / 2);\n    };\n    /**\n     * Finds the dot product\n     *\n     * @param {Vector} a\n     * @param {Vector} b\n     * @returns {number} The dot product of a, b\n     * @memberof Vector\n     */\n    Vector.Dot = function (a, b) {\n        return a.x * b.x + a.y * b.y + a.z * b.z;\n    };\n    /**\n     * Finds the dot product of this vector and another vector\n     *\n     * @param {Vector} v2 The vector to find the dot product with\n     * @returns {number} The dot product of this and the given vector\n     * @memberof Vector\n     */\n    Vector.prototype.dotProduct = function (v2) {\n        //return Vector.Dot(this, v2);\n        return this.x * v2.x + this.y * v2.y + this.z * v2.z;\n    };\n    /**\n     * Finds the dot product of this vector with its self\n     *\n     * @returns {nubler} The dot product\n     * @memberof Vector\n     */\n    Vector.prototype.absSquared = function () {\n        //return Vector.Dot(this, this);\n        return this.x * this.x + this.y * this.y + this.z * this.z;\n    };\n    /**\n     * Returns the sqrt of dot product of this vector\n     *\n     * @returns {nubler} The dot product\n     * @memberof Vector\n     */\n    Vector.prototype.abs = function () {\n        return Math.sqrt(this.absSquared());\n    };\n    /**\n     * Finds the cross product of this vector and another vector\n     *\n     * While the cross product in 2D is not well-defined, it can be calculated in terms of an imaginary z-axis\n     *\n     * @param {Vector} v2 The vector to find the cross product with\n     * @returns {number} The cross product of the two vectors\n     * @memberof Vector\n     */\n    Vector.prototype.crossProduct = function (v2) {\n        return (this.x * v2.y) - (this.y * v2.x);\n    };\n    /**\n     * Gets the direction of the current vector in radians\n     *\n     * The direction is the angle in polar coordinates\n     *\n     * @returns {number} The direction (or angle) of the vector\n     * @memberof Vector\n     */\n    Vector.prototype.getDirection = function () {\n        return Math.atan2(this.y, this.x);\n    };\n    /**\n     * Adds a vector to the current vector, returning the sum as a new vector\n     *\n     * @param {Vector} v2 The vector to add\n     * @returns {Vector} The sum of the two vectors\n     * @memberof Vector\n     */\n    Vector.prototype.add = function (v2) {\n        return new Vector(this.x + v2.x, this.y + v2.y, this.z + v2.z);\n    };\n    /**\n     * Adds a vector to the current vector, modifying the current vector's components to represent\n     * the difference\n     *\n     * @param {Vector} v2 The vector to add\n     * @memberof Vector\n     */\n    Vector.prototype.addTo = function (v2) {\n        this.x += v2.x;\n        this.y += v2.y;\n        this.z += v2.z;\n    };\n    /**\n     * Subtracts a vector from the current vector, returning the difference as a new vector\n     *\n     * @param {Vector} v2 The vector to subtract\n     * @returns {Vector} The difference of the two vectors\n     * @memberof Vector\n     */\n    Vector.prototype.subtract = function (v2) {\n        return new Vector(this.x - v2.x, this.y - v2.y, this.z - v2.z);\n    };\n    /**\n     * Subtracts a vector from the current vector, modifying the current vector's components to represent\n     * the difference\n     *\n     * @param {Vector} v2 The vector to subtract\n     * @memberof Vector\n     */\n    Vector.prototype.subtractFrom = function (v2) {\n        this.x -= v2.x;\n        this.y -= v2.y;\n        this.z -= v2.z;\n    };\n    /**\n     * Multiplies the vector by a scalar value, returning the product as a new vector\n     *\n     * @param {number} scalar The scalar value to multiply the vector by\n     * @returns {Vector} The product of the vector and the scalar\n     * @memberof Vector\n     */\n    Vector.prototype.multiply = function (scalar) {\n        return new Vector(scalar * this.x, scalar * this.y, scalar * this.z);\n    };\n    /**\n     * Multiplies the vector by a scalar value, modifying the current vector's components to represent\n     * the product\n     *\n     * @param {number} scalar The scalar value to multiply the vector by\n     * @memberof Vector\n     */\n    Vector.prototype.multiplyBy = function (scalar) {\n        this.x *= scalar;\n        this.y *= scalar;\n        this.z *= scalar;\n    };\n    // To reset the force on the electron we need the Zero vector\n    Vector.Zero = new Vector(0, 0, 0);\n    return Vector;\n}());\nexports.Vector = Vector;\nvar RotationMatrix = /** @class */ (function () {\n    /**\n     * Constructor\n     * @param {Vector} r\n     * @param {Vector} s\n     * @param {Vector} t\n     */\n    function RotationMatrix(r, s, t) {\n        this.r = r;\n        this.s = s;\n        this.t = t;\n    }\n    /**\n     * @param {number} radians\n     * @returns {RotationMatrix}\n     * @memberof RotationMatrix\n     */\n    RotationMatrix.prototype.RotateX = function (radians) {\n        var a = Math.cos(radians);\n        var b = Math.sin(radians);\n        return new RotationMatrix(this.r.RotateX(a, b), this.s.RotateX(a, b), this.t.RotateX(a, b));\n    };\n    /**\n     * @param {number} radians\n     * @returns {RotationMatrix}\n     * @memberof RotationMatrix\n     */\n    RotationMatrix.prototype.RotateY = function (radians) {\n        var a = Math.cos(radians);\n        var b = Math.sin(radians);\n        return new RotationMatrix(this.r.RotateY(a, b), this.s.RotateY(a, b), this.t.RotateY(a, b));\n    };\n    /**\n     * @param {number} radians\n     * @returns {RotationMatrix}\n     * @memberof RotationMatrix\n     */\n    RotationMatrix.prototype.RotateZ = function (radians) {\n        var a = Math.cos(radians);\n        var b = Math.sin(radians);\n        return new RotationMatrix(this.r.RotateZ(a, b), this.s.RotateZ(a, b), this.t.RotateZ(a, b));\n    };\n    /**\n     * @returns {Vector}\n     * @param {Vector} v\n     * @memberof RotationMatrix\n     */\n    RotationMatrix.prototype.Rotate = function (v) {\n        return new Vector(v.dotProduct(this.r), v.dotProduct(this.s), v.dotProduct(this.t));\n    };\n    // properties\n    RotationMatrix.Unrotated = new RotationMatrix(new Vector(1, 0, 0), new Vector(0, 1, 0), new Vector(0, 0, 1));\n    return RotationMatrix;\n}());\nexports.RotationMatrix = RotationMatrix;\n","\"use strict\";\nexports.__esModule = true;\nexports.Electron = void 0;\nvar classes_1 = require(\"./classes\");\nvar Electron = /** @class */ (function () {\n    /**\n     * Constructor\n     * @param {Vector} position\n     */\n    function Electron(position) {\n        this.position = position.Normalize();\n    }\n    /**\n     * @param {Electron} v2\n     * @returns {void}\n     * @memberof Electron\n     */\n    Electron.prototype.AddExtForce = function (v2) {\n        // Force of electrically charged electrons: F = k*q1*q2/r^2. Set F = 1/r^2.\n        var dp = this.position.subtract(v2.position);\n        var forcemagnitude = 1 / dp.absSquared();\n        var force = dp.Normalize().multiply(forcemagnitude);\n        this.force = this.force.add(force);\n        v2.force = v2.force.subtract(force);\n    };\n    /**\n     * Update electron position. We need to move the electron to the direction of the force while keeping in mind\n     * to constrain its move onto the sphere surface.\n     * @param {Vector} positionShift\n     * @returns {void}\n     * @memberof Electron\n     */\n    Electron.prototype.UpdatePosition = function (positionShift) {\n        this.position = this.position.add(positionShift).Normalize();\n    };\n    /**\n     * Calculate tangential force.\n     * force = radial force + tangential force\n     * @returns {Vector}\n     * @memberof Electron\n     */\n    Electron.prototype.TangentialForce = function () {\n        // Calculate radial component using dot product and subtract to get tangential force\n        var radialForce = this.position.multiply(this.force.dotProduct(this.position));\n        return this.force.subtract(radialForce);\n    };\n    /**\n     * @param rotmat\n     * @memberof Electron\n     */\n    Electron.prototype.Rotate = function (rotmat) {\n        this.position = rotmat.Rotate(this.position);\n    };\n    /**\n     * Position getter\n     */\n    Electron.prototype.GetPosition = function () {\n        return this.position;\n    };\n    /**\n     * Force setter\n     */\n    Electron.prototype.ResetForce = function () {\n        this.force = classes_1.Vector.Zero;\n    };\n    return Electron;\n}());\nexports.Electron = Electron;\n","\"use strict\";\nexports.__esModule = true;\nexports.Display = exports.CameraCoords = void 0;\nvar classes_1 = require(\"./classes\");\nvar CameraCoords = /** @class */ (function () {\n    /**\n     * Constructor\n     * @param {number} h\n     * @param {number} v\n     */\n    function CameraCoords(h, v) {\n        this.horizontal = h;\n        this.vertical = v;\n    }\n    return CameraCoords;\n}());\nexports.CameraCoords = CameraCoords;\nvar Display = /** @class */ (function () {\n    /**\n     * Constructor\n     *\n     * @param {number} pixelsWide       // wide number of pixels\n     * @param {number} pixelsHigh       // high number of pixels\n     * @param {number} zoomFactor       // the greater the value the more zoom in\n     * @param {number} parallaxDistance // for scaling effect of distance on perspective\n     * @memberof Display\n     */\n    function Display(pixelsWide, pixelsHigh, zoomFactor, parallaxDistance) {\n        this.pixelsWide = pixelsWide;\n        this.pixelsHigh = pixelsHigh;\n        this.zoomFactor = zoomFactor;\n        this.parallaxDistance = parallaxDistance;\n    }\n    /**\n     * @param {CanvasRenderingContext2D} context\n     * @return void\n     * @memberof Display\n     */\n    Display.prototype.Erase = function (context) {\n        context.clearRect(0, 0, this.pixelsWide, this.pixelsHigh);\n        //context.strokeRect(0, 0, this.pixelsWide, this.pixelsHigh);\n    };\n    /**\n     * GetCameraCoords\n     * @param point\n     * @memberof Display\n     */\n    Display.prototype.GetCameraCoords = function (point) {\n        var scale = this.pixelsWide * this.zoomFactor / (this.parallaxDistance - point.z);\n        var horizontal = scale * point.x;\n        var vertical = scale * point.y;\n        return new CameraCoords(this.pixelsWide / 2 + horizontal, this.pixelsHigh / 2 - vertical);\n    };\n    /**\n     * Draw the sphere.\n     *\n     * @param context\n     * @param center\n     * @param radius\n     * @param color\n     * @memberof Display\n     */\n    Display.prototype.DrawSphere = function (context, center, radius, color) {\n        // NOTE: This isn't quite right. The actual projection of a sphere\n        // onto the pinhole camera screen is an ellipse, not a circle.\n        // This will matter only for very low zoom with very close spheres\n        // that are far off center.\n        var origin = this.GetCameraCoords(center);\n        var rho = radius / this.parallaxDistance;\n        var xp = rho * Math.sqrt(this.parallaxDistance * this.parallaxDistance - radius * radius);\n        var zp = rho * radius;\n        var tangent = center.add(new classes_1.Vector(xp, 0, zp));\n        var edge = this.GetCameraCoords(tangent);\n        var cradius = Math.abs(edge.horizontal - origin.horizontal);\n        context.beginPath();\n        context.arc(origin.horizontal, origin.vertical, cradius, 0, 2 * Math.PI, true);\n        context.fillStyle = \"white\";\n        context.strokeStyle = color;\n        context.lineWidth = 1;\n        context.stroke();\n        return tangent.z; // the z-value beneath which an electron is \"around the bend\"\n    };\n    /**\n     * Draw line.\n     * @param context\n     * @param startpoint\n     * @param endpoint\n     * @param startcolor\n     * @param endcolor\n     * @param linedash\n     * @memberof Display\n     */\n    Display.prototype.DrawLine = function (context, startpoint, endpoint, startcolor, endcolor, linedash) {\n        var startcam = this.GetCameraCoords(startpoint);\n        var endcam = this.GetCameraCoords(endpoint);\n        var gradient = context.createLinearGradient(startcam.horizontal, startcam.vertical, endcam.horizontal, endcam.vertical);\n        gradient.addColorStop(0, startcolor);\n        gradient.addColorStop(1, endcolor);\n        context.setLineDash(linedash);\n        context.beginPath();\n        context.moveTo(startcam.horizontal, startcam.vertical);\n        context.lineTo(endcam.horizontal, endcam.vertical);\n        context.strokeStyle = gradient;\n        context.lineWidth = 1;\n        context.stroke();\n        context.setLineDash([]);\n    };\n    return Display;\n}());\nexports.Display = Display;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nvar VectorAnalysis_1 = require(\"./VectorAnalysis\");\n__createBinding(exports, VectorAnalysis_1, \"Vector\");\nvar VectorAnalysis_2 = require(\"./VectorAnalysis\");\n__createBinding(exports, VectorAnalysis_2, \"RotationMatrix\");\nvar Electron_1 = require(\"./Electron\");\n__createBinding(exports, Electron_1, \"Electron\");\nvar Display_1 = require(\"./Display\");\n__createBinding(exports, Display_1, \"Display\");\nvar Display_2 = require(\"./Display\");\n__createBinding(exports, Display_2, \"CameraCoords\");\n","\"use strict\";\nexports.__esModule = true;\nvar classes_1 = require(\"./classes\");\nvar Electrons;\n(function (Electrons) {\n    'use strict';\n    /**\n     * @param {number} d\n     * @returns {number}\n     */\n    function RadiansFromDegrees(d) {\n        return d * (Math.PI / 180);\n    }\n    /**\n     * Simulation\n     */\n    var Simulation = /** @class */ (function () {\n        /**\n         * Constructor\n         */\n        function Simulation() {\n            this.sphereCenter = new classes_1.Vector(0, 0, 0);\n            this.eList = [];\n        }\n        /**\n         *\n         * @param {Electron} p\n         * @memberof Simulation\n         */\n        Simulation.prototype.AddElectron = function (p) {\n            this.eList.push(p);\n        };\n        /**\n         * @returns {void}\n         * @memberof Simulation\n         */\n        Simulation.prototype.RemoveElectron = function () {\n            if (this.eList.length > 1) {\n                this.eList.pop();\n            }\n        };\n        /**\n         * @returns {number}\n         * @memberof Simulation\n         */\n        Simulation.prototype.CountElectrons = function () {\n            return this.eList.length;\n        };\n        /**\n         * @returns {void}\n         * @memberof Simulation\n         */\n        Simulation.prototype.Update = function () {\n            var n = this.eList.length;\n            for (var i = 0; i < n; ++i) {\n                this.eList[i].ResetForce();\n            }\n            for (var i = 0; i < n - 1; ++i) {\n                for (var j = i + 1; j < n; ++j) {\n                    this.eList[i].AddExtForce(this.eList[j]);\n                }\n            }\n            var tangentialForceList = [];\n            var maxForceMag = 0;\n            for (var i = 0; i < n; ++i) {\n                var tf = this.eList[i].TangentialForce();\n                var forceMag = tf.abs();\n                tangentialForceList.push(tf);\n                maxForceMag = Math.max(maxForceMag, forceMag);\n            }\n            if (maxForceMag > 0) {\n                // We want to move each electron a small distance compared with\n                // the average distance between electrons.\n                // As the number of electrons on the sphere increases, the\n                // average distance between them goes down as an inverse square root.\n                var dt = 0.005 / (maxForceMag * Math.sqrt(n));\n                for (var i = 0; i < n; ++i) {\n                    this.eList[i].UpdatePosition(tangentialForceList[i].multiply(dt));\n                }\n            }\n        };\n        /**\n         * @param {number} newCount\n         * @returns {void}\n         * @memberof Simulation\n         */\n        Simulation.prototype.AdjustCountElectrons = function (newCount) {\n            while (this.CountElectrons() < newCount) {\n                this.AddElectron(new classes_1.Electron(RandomUnitVector()));\n            }\n            while (this.CountElectrons() > newCount) {\n                this.RemoveElectron();\n            }\n            SaveOptions();\n        };\n        /**\n         * @param {Display} display\n         * @returns {void}\n         * @memberof Simulation\n         */\n        Simulation.prototype.Render = function (display) {\n            // Store the 2D context\n            var context = canvas.getContext('2d');\n            display.Erase(context);\n            var zbend = display.DrawSphere(context, this.sphereCenter, 1.0, '#d9d9d9');\n            for (var _i = 0, _a = this.eList; _i < _a.length; _i++) {\n                var p = _a[_i];\n                display.DrawSphere(context, p.GetPosition(), 0.01, this.PointColor(p.GetPosition(), zbend));\n            }\n            var isConnectedIndex = {};\n            var linedash = [[], [3, 6], [], [1, 5], [1, 10]];\n            for (var level = 0; level < 5; ++level) {\n                // Find the smallest distance between any two (as-yet unconnected) electrons.\n                var nextIsConnectedIndex = {};\n                var minDistance = null;\n                for (var i = 0; i < this.eList.length - 1; ++i) {\n                    if (!isConnectedIndex[i]) {\n                        var ipos = this.eList[i].GetPosition();\n                        for (var j = i + 1; j < this.eList.length; ++j) {\n                            if (!isConnectedIndex[j]) {\n                                var jpos = this.eList[j].GetPosition();\n                                var distance = classes_1.Vector.Distance(ipos, jpos);\n                                if ((minDistance === null) || (distance < minDistance)) {\n                                    minDistance = distance;\n                                }\n                            }\n                        }\n                    }\n                }\n                if (minDistance === null) {\n                    break; // nothing more to connect\n                }\n                // Connect all pairs of electrons whose distance is not much larger than the minimum.\n                var threshold = 1.005 * minDistance;\n                for (var i = 0; i < this.eList.length - 1; ++i) {\n                    if (!isConnectedIndex[i]) {\n                        var ipos = this.eList[i].GetPosition();\n                        var icolor = this.PointColor(ipos, zbend);\n                        for (var j = i + 1; j < this.eList.length; ++j) {\n                            if (!isConnectedIndex[j]) {\n                                var jpos = this.eList[j].GetPosition();\n                                var distance = classes_1.Vector.Distance(ipos, jpos);\n                                if (distance <= threshold) {\n                                    var jcolor = this.PointColor(jpos, zbend);\n                                    //console.log(linedash[level]);\n                                    display.DrawLine(context, ipos, jpos, icolor, jcolor, linedash[level]);\n                                    nextIsConnectedIndex[i] = nextIsConnectedIndex[j] = true;\n                                }\n                            }\n                        }\n                    }\n                }\n                for (var i in nextIsConnectedIndex) {\n                    isConnectedIndex[i] = true;\n                }\n            }\n        };\n        /**\n         * @param {number} x\n         * @memberof Simulation\n         */\n        Simulation.prototype.ColorRound = function (x) {\n            return Math.round(255 * Math.min(1, Math.max(0, x)));\n        };\n        /**\n         * When electron travels to the hidden sphere surface gradually change its color.\n         *\n         * @param {Vector} p\n         * @param {number} zlimit\n         * @returns {string}\n         * @memberof Simulation\n         */\n        Simulation.prototype.PointColor = function (p, zlimit) {\n            var frac = (zlimit - p.z) / (zlimit - (-1.1));\n            var red = this.ColorRound(0.2 + (0.8 * frac));\n            var blue = this.ColorRound(1.7 * frac);\n            var green = this.ColorRound(frac);\n            return 'rgb(' + red + ',' + green + ',' + blue + ')';\n        };\n        /**\n         * @param {RotationMatrix} rotmat\n         * @returns {void}\n         * @memberof Simulation\n         */\n        Simulation.prototype.Rotate = function (rotmat) {\n            for (var _i = 0, _a = this.eList; _i < _a.length; _i++) {\n                var p = _a[_i];\n                p.Rotate(rotmat);\n            }\n        };\n        return Simulation;\n    }());\n    // Init params\n    var canvas;\n    var sim;\n    var display;\n    // Conf\n    var UpdatesPerFrame = 10;\n    var FrameDelayMillis = 30;\n    var ZoomFactor = 7;\n    var ParallaxDistance = 15.0;\n    var MinElectronsCount = 2;\n    var MaxElectronsCount = 200;\n    var Options;\n    var ySpinner = classes_1.RotationMatrix.Unrotated.RotateY(RadiansFromDegrees(0.15));\n    var xSpinner = classes_1.RotationMatrix.Unrotated.RotateX(RadiansFromDegrees(0.0377));\n    var initialTilt = classes_1.RotationMatrix.Unrotated.RotateX(RadiansFromDegrees(-15.0));\n    /**\n     * @returns {void}\n     */\n    function Frame() {\n        sim.Render(display);\n        for (var i = 0; i < UpdatesPerFrame; ++i) {\n            sim.Update();\n        }\n        sim.Rotate(ySpinner);\n        sim.Rotate(xSpinner);\n        window.setTimeout(Frame, FrameDelayMillis);\n    }\n    /**\n     * Algorithm for picking a random point on a sphere, which avoids clustering of points on the 2 polars region.\n     * http://mathworld.wolfram.com/SpherePointPicking.html\n     * https://angms.science/doc/RM/randUnitVec.pdf\n     * See equations (9), (10), (11) there.\n     * @returns {Vector}\n     */\n    function RandomUnitVector() {\n        while (true) {\n            var a = 1 - 2 * Math.random();\n            var b = 1 - 2 * Math.random();\n            var mag = (a * a) + (b * b);\n            if (mag < 1) {\n                var root = 2 * Math.sqrt(1 - mag);\n                return new classes_1.Vector(a * root, b * root, 1 - (2 * mag));\n            }\n        }\n    }\n    /**\n     * OnEditElectronsCount\n     */\n    function OnEditElectronsCount() {\n        var electronsCountEdit = document.getElementById('ElectronsCountEditBox');\n        var errorMessage = document.getElementById('ErrorMessage');\n        var text = electronsCountEdit.value;\n        if (text.match(/^[0-9]{1,4}$/)) {\n            var count = parseInt(text);\n            if (count >= MinElectronsCount && count <= MaxElectronsCount) {\n                sim.AdjustCountElectrons(count);\n                errorMessage.textContent = '';\n                electronsCountEdit.blur();\n                return;\n            }\n        }\n        errorMessage.textContent = 'Invalid number of electrons. Must be an integer in the range ' +\n            MinElectronsCount + ' to ' + MaxElectronsCount;\n    }\n    /**\n     * LoadOptions\n     */\n    function LoadOptions() {\n        try {\n            Options = JSON.parse(window.localStorage.getItem('Electrons'));\n        }\n        catch (e) { }\n        if (!Options || typeof Options.CountElectrons !== 'number') {\n            Options = { CountElectrons: 22 };\n        }\n    }\n    /**\n     * SaveOptions\n     */\n    function SaveOptions() {\n        try {\n            Options.CountElectrons = sim.CountElectrons();\n            window.localStorage.setItem('Electrons', JSON.stringify(Options));\n        }\n        catch (e) { }\n    }\n    window.onload = function () {\n        LoadOptions();\n        // var explanationDiv              = document.getElementById('ExplanationDiv');\n        // var hideShowExplanationButton   = document.getElementById('HideShowExplanationButton');\n        var hidePrompt = '&laquo;&nbsp;Κλείσιμο';\n        var showPrompt = 'Πληροφορίες&nbsp;&raquo;';\n        // Get the canvas element from the DOM\n        canvas = document.getElementById('SimCanvas');\n        //canvas.addEventListener('click', OnCanvasClick, false);\n        sim = new Simulation();\n        for (var i = 0; i < Options.CountElectrons; ++i) {\n            sim.AddElectron(new classes_1.Electron(RandomUnitVector()));\n        }\n        var electronsCountEdit = document.getElementById('ElectronsCountEditBox');\n        electronsCountEdit.value = Options.CountElectrons.toFixed();\n        electronsCountEdit.onblur = OnEditElectronsCount;\n        electronsCountEdit.setAttribute('min', MinElectronsCount.toFixed());\n        electronsCountEdit.setAttribute('max', MaxElectronsCount.toFixed());\n        electronsCountEdit.onkeypress = function (evt) {\n            if (evt.keyCode === 13) {\n                OnEditElectronsCount();\n                event.preventDefault();\n                return false;\n            }\n            return true;\n        };\n        display = new classes_1.Display(canvas.width, canvas.height, ZoomFactor, ParallaxDistance);\n        sim.Rotate(initialTilt);\n        Frame();\n    };\n})(Electrons || (Electrons = {}));\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}